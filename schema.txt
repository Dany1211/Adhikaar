PROJECT: ADHIKAAR
PURPOSE: Canonical data schemas for offline-first + Supabase-backed app

PRINCIPLES:
- English is canonical storage language
- Translations happen at UI / AI layer
- AI NEVER mutates authoritative data
- Eligibility is deterministic and auditable
- Supabase is a sync target, not runtime dependency
--------------------------------------------------


==============================
SCHEMA: schemes
==============================
Purpose:
- Master registry of all government schemes
- Read-only for users
- Source of truth for discovery & eligibility mapping

Fields:
- id (uuid, primary key)
- name (text, not null)
- short_description (text, not null)
- long_description (text)
- state_type (enum: 'central' | 'state')
- implementing_department (text, nullable)
- official_link (text)
- helpline_number (text)
- application_mode (enum: 'online' | 'offline' | 'both')
- benefits (text)
- is_active (boolean, default true)
- priority_rank (int, default 0)          // For featured ordering
- last_updated (date)
- created_at (timestamp)

Notes:
- NO eligibility logic here
- NO rule logic here
- Pure informational layer


==============================
SCHEMA: scheme_eligibility_rules
==============================
Purpose:
- Deterministic rule engine
- Fully offline evaluable
- One-to-many with schemes
- AI NEVER evaluates rules

Fields:
- id (uuid, primary key)
- scheme_id (uuid, FK -> schemes.id)

------------------------------
Demographic Rules
------------------------------
- min_age (int, nullable)
- max_age (int, nullable)
- allowed_genders (text[], nullable)      // ['male','female','other']
- allowed_categories (text[], nullable)   // ['sc','st','obc','general','ews']

------------------------------
Income Rules
------------------------------
- income_min (numeric, nullable)
- income_max (numeric, nullable)
- income_type (enum: 'individual' | 'family', nullable)

------------------------------
Occupation Rules
------------------------------
- allowed_occupations (text[], nullable)
- employment_status (text[], nullable)    // ['employed','unemployed','student']

------------------------------
Agriculture Rules
------------------------------
- requires_farmer (boolean, nullable)
- min_land_size (numeric, nullable)
- max_land_size (numeric, nullable)

------------------------------
Social Conditions
------------------------------
- requires_disability (boolean, nullable)
- widow_only (boolean, nullable)
- student_only (boolean, nullable)
- minority_only (boolean, nullable)
- bpl_only (boolean, nullable)

------------------------------
Geographic Overrides
------------------------------
- applicable_states (text[], nullable)     // Overrides scheme-level
- excluded_states (text[], nullable)

------------------------------
Administrative
------------------------------
- is_active (boolean, default true)
- created_at (timestamp)

Notes:
- Multiple rule rows per scheme allowed
- All rules must be AND-evaluated within row
- Different rows may represent OR scenarios


==============================
SCHEMA: scheme_required_documents
==============================
Purpose:
- Document requirements per scheme
- Fully deterministic
- Offline reference

Fields:
- id (uuid, primary key)
- scheme_id (uuid, FK -> schemes.id)
- document_name (text)
- is_mandatory (boolean, default true)
- created_at (timestamp)

Notes:
- Avoid separate documents table unless reuse needed
- Keep simple unless scaling nationally


==============================
SCHEMA: users
==============================
Purpose:
- Optional soft identity
- Works without authentication

Fields:
- id (uuid, primary key)
- phone (text, unique, nullable)
- name (text, nullable)
- created_at (timestamp)

Notes:
- Local UUID generated offline
- Supabase sync optional


==============================
SCHEMA: user_profiles
==============================
Purpose:
- Structured eligibility data
- Filled via conversational AI
- NEVER visible form-based

Fields:
- id (uuid, primary key)
- user_id (uuid, FK -> users.id)

------------------------------
Core Eligibility Data
------------------------------
- age (int, nullable)
- gender (text, nullable)
- state (text, nullable)
- income (numeric, nullable)
- income_type (enum: 'individual' | 'family', nullable)
- occupation (text, nullable)
- employment_status (text, nullable)
- category (text, nullable)

------------------------------
Agriculture Data
------------------------------
- is_farmer (boolean, nullable)
- land_size (numeric, nullable)

------------------------------
Social Data
------------------------------
- has_disability (boolean, nullable)
- is_widow (boolean, nullable)
- is_student (boolean, nullable)
- is_minority (boolean, nullable)
- is_bpl (boolean, nullable)

------------------------------
Metadata
------------------------------
- updated_at (timestamp)

Notes:
- Fully offline usable
- Synced only if auth added
- Single source of truth per user


==============================
SCHEMA: applications
==============================
Purpose:
- Tracks scheme engagement
- Retention mechanism

Fields:
- id (uuid, primary key)
- user_id (uuid, FK -> users.id)
- scheme_id (uuid, FK -> schemes.id)
- status (enum: 'saved' | 'applied' | 'pending' | 'approved' | 'rejected')
- applied_on (date, nullable)
- notes (text, nullable)
- created_at (timestamp)

Notes:
- Works offline
- Sync later


==============================
SCHEMA: scheme_categories
==============================
Purpose:
- Canonical category registry
- Prevents string duplication

Fields:
- id (text, primary key)
- label (text)
- icon_name (text, nullable)
- created_at (timestamp)

Notes:
- Small static table
- Cached permanently


==============================
OFFLINE-FIRST RULES
==============================
1. App must function fully without internet.
2. Supabase is synchronization layer only.
3. All reads must have local fallback.
4. All eligibility evaluation must run locally.
5. Rule evaluation must be explainable and auditable.
6. No hidden logic in AI.


==============================
LANGUAGE RULES
==============================
- DB stores canonical English.
- UI language selected by user.
- AI translates only at presentation layer.
- Structured fields remain language-neutral.


==============================
AI ROLE (STRICT)
==============================
AI IS ALLOWED TO:
- Extract structured fields from free text
- Translate scheme descriptions
- Explain eligibility reasoning

AI IS NOT ALLOWED TO:
- Decide eligibility
- Modify scheme data
- Invent schemes
- Override deterministic rules
--------------------------------------------------
END OF FILE
